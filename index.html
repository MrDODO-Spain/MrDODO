<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>MrDODO — Crafted Wooden Objects</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="css/style.css">

  <style>
    /* 1. ESTILOS DEL VELO (OVERLAY) */
    .menu-overlay {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0, 0, 0, 0.3);
      z-index: 1000;
      display: none;
      opacity: 0;
      transition: opacity 0.3s ease;
    }
    .menu-overlay.active {
      display: block;
      opacity: 1;
    }

    /* 2 Y 3. MEJORA TÁCTIL Y FEEDBACK VISUAL */
    @media (max-width: 768px) {
      /* Área de clic generosa (Punto 2) */
      .main-nav > ul > li > a {
        padding: 18px 0 !important; 
        display: flex;
        align-items: center;
        width: 100%;
        transition: opacity 0.2s ease;
      }
      
      /* Feedback visual al tocar enlaces (Punto 3) */
      .main-nav > ul > li > a:active {
        opacity: 0.5;
      }

      /* La X de cierre con Feedback (Punto 3) */
      .close-menu {
        padding: 15px !important;
        font-size: 45px !important;
        line-height: 0.8 !important;
        transition: transform 0.1s ease, opacity 0.1s ease;
        -webkit-tap-highlight-color: transparent; /* Evita el cuadro azul feo en Android */
      }
      
      .close-menu:active {
        transform: scale(0.9); /* Se encoge un poquito al tocarla */
        opacity: 0.7;
      }

      /* Feedback para la hamburguesa (Punto 3) */
      .menu-toggle:active {
        opacity: 0.6;
      }

      .has-submenu .submenu li a {
        padding: 12px 0 12px 20px !important;
      }
    }
  </style>
</head>

<body>

<header class="site-header">
  <div class="header-inner">
    <a href="#top" class="logo-link">
    <img src="images/logo.svg" alt="MrDODO" class="logo" width="120" height="20">
    </a>

    <nav class="main-nav">
      <button class="close-menu" aria-label="Cerrar">&times;</button>
      
      <ul>
        <li class="has-submenu">
          <a href="#">Collection</a>
          <ul class="submenu">
            <li><a href="#collection-dynamics">Dynamics</a></li>
            <li><a href="#collection-minimini">MiniMini</a></li>
          </ul>
        </li>
        <li><a href="#heritage">Heritage</a></li>
        <li><a href="#craft">Craft</a></li>
        <li><a href="#eco">Sustainability</a></li>
        <li><a href="#maintenance">Maintenance</a></li>
        <li><a href="#contact">Contact</a></li>
      </ul>
    </nav>

    <button class="menu-toggle" aria-label="Open menu">
      <span class="bar"></span>
      <span class="bar"></span>
      <span class="bar"></span>
    </button>

    <div class="lang-switch">
      <span class="active">EN</span> / <a href="index-es.html">ES</a>
    </div>
  </div>
</header>

<section class="hero">
  <div class="hero-image">
    <img src="images/hero-01.jpg" alt="MrDODO articulated object">
  </div>
<div class="hero-quote">
  <span class="quote-text">
    Originality goes back to the simplicity<br>
    of the first solutions.
  </span>
  <span class="quote-author">Antoni Gaudí</span>
  <span class="quote-place">BARCELONA</span>
</div>
</section>

<script>
document.addEventListener('DOMContentLoaded', function () {
  const toggle = document.querySelector('.menu-toggle');
  const nav = document.querySelector('.main-nav');
  const closeBtn = document.querySelector('.close-menu');
  const collectionBtn = document.querySelector('.has-submenu > a');

  // CREAMOS EL VELO DINÁMICAMENTE
  const overlay = document.createElement('div');
  overlay.className = 'menu-overlay';
  document.body.appendChild(overlay);

  function enableScroll() {
    document.body.style.overflow = '';
    overlay.classList.remove('active');
    setTimeout(() => { 
      if(!overlay.classList.contains('active')) overlay.style.display = 'none'; 
    }, 300);
  }

  // Abrir menú (Punto 1: Bloqueo de scroll)
  toggle.addEventListener('click', () => {
    nav.classList.add('open');
    document.body.style.overflow = 'hidden';
    overlay.style.display = 'block';
    setTimeout(() => overlay.classList.add('active'), 10);
  });

  // Cerrar con la X
  closeBtn.addEventListener('click', () => {
    nav.classList.remove('open');
    enableScroll();
  });

  // Cerrar al hacer clic en el velo
  overlay.addEventListener('click', () => {
    nav.classList.remove('open');
    enableScroll();
  });

  collectionBtn.addEventListener('click', function(e) {
    if (window.innerWidth <= 768) {
      e.preventDefault();
      this.parentElement.classList.toggle('active');
    }
  });

  nav.querySelectorAll('a').forEach(link => {
    link.addEventListener('click', (e) => {
      if(!link.parentElement.classList.contains('has-submenu')) {
        if(window.innerWidth <= 768) {
          nav.classList.remove('open');
          enableScroll();
        }
      }
    });
  });

  // Cookies
  const popup = document.getElementById('cookie-popup');
  const btnAccept = document.getElementById('accept-cookies');
  const btnReject = document.getElementById('reject-cookies');
  if (popup && !localStorage.getItem('cookiesAccepted')) {
    popup.style.display = 'flex';
  }
  if(btnAccept) {
    btnAccept.addEventListener('click', () => {
      localStorage.setItem('cookiesAccepted', 'true');
      popup.style.display = 'none';
    });
  }
});
</script>

</body>
</html>
